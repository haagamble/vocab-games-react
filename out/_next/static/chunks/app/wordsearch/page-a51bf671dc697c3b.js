(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23],{1200:(e,t,r)=>{"use strict";async function l(e){try{let t=await fetch("/api/wordlists/".concat(e));if(!t.ok)return console.error("Failed to load word list: ".concat(e)),null;let r=(await t.json()).map(e=>({word:e[0],definition:e[1]}));return{name:e,words:r}}catch(t){return console.error("Error loading word list ".concat(e,":"),t),null}}function n(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,l=t.filter(t=>t.word!==e).map(e=>e.word).sort(()=>Math.random()-.5).slice(0,r-1);return[e,...l].sort(()=>Math.random()-.5)}function o(e){let t=[...e];for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}r.d(t,{R3:()=>o,ZU:()=>n,zb:()=>l})},1510:(e,t,r)=>{"use strict";r.d(t,{WordListProvider:()=>s,s:()=>a});var l=r(5155),n=r(2115);let o=(0,n.createContext)(void 0);function a(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useWordList must be used within a WordListProvider");return e}function s(e){let{children:t}=e,[r,a]=(0,n.useState)(null);return(0,l.jsx)(o.Provider,{value:{selectedWordList:r,setSelectedWordList:a},children:t})}},2751:(e,t,r)=>{Promise.resolve().then(r.bind(r,6077))},6077:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var l=r(5155),n=r(2115),o=r(6874),a=r.n(o),s=r(1510),i=r(1200),d=r(5585);let c="АБВГҒДЕЁЖЗИЙӢКЛМНООПҚРСТУӮФХҲЧҶШЪЭЮЯ",u=["КИТОБ","ДАРЁ","ОСМОН","ГУЛҲО","ШАҲР","МАКТАБ","ДӮСТ","ХОНА","ОИЛА","МОДАР","ПАДАР","БАРОР","ХОҲАР","РӮЗ","ШАБ","БАХОР","ТОБИСТОН","ТИРАМОҲ","ЗИМИСТОН"];function h(){let{selectedWordList:e}=(0,s.s)(),[t,r]=(0,n.useState)(null),[o,h]=(0,n.useState)(!0),[m,g]=(0,n.useState)(null),[x,f]=(0,n.useState)([]),[b,p]=(0,n.useState)([]),[w,v]=(0,n.useState)([]),[y,j]=(0,n.useState)([]),[N,M]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1),[C,E]=(0,n.useState)([]),[P,D]=(0,n.useState)(null),[L,W]=(0,n.useState)(0),[B,A]=(0,n.useState)(!1),F=(0,n.useRef)(null),[R,T]=(0,n.useState)(null);function _(){var e;let r;A(!1),W(0),j([]),E([]),k(!1),D(null),M(!1);let l=(null==t||null==(e=t.words)?void 0:e.map(e=>e.word||"").filter(Boolean))||[],n=(l.length>0?l:u).map(e=>(e||"").toUpperCase().trim()).filter(e=>e.length>=3&&e.length<=10&&!/\s/.test(e)),o=(function(e){let t=[...e];for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t})([...n]).slice(0,Math.min(15,n.length)),a=0;do r=function(e,t){let r=Array.from({length:10},()=>Array(e).fill("")),l=[[0,1],[0,-1],[1,0],[-1,0],[1,1],[-1,-1],[1,-1],[-1,1]],n=[];for(let o of t){let t=.5>Math.random()?o:[...o].reverse().join(""),a=!1,s=0;for(;!a&&s<300;){s++;let i=l[Math.floor(Math.random()*l.length)],d=1===i[0]?e-t.length:-1===i[0]?t.length-1:e-1,c=-1===i[0]?t.length-1:0,u=1===i[1]?e-t.length:-1===i[1]?t.length-1:e-1,h=-1===i[1]?t.length-1:0,m=Math.floor(Math.random()*(d-c+1))+c,g=Math.floor(Math.random()*(u-h+1))+h;if(function(t,l,n,o){for(let a=0;a<t.length;a++){let s=l+o[0]*a,i=n+o[1]*a;if(s<0||s>=e||i<0||i>=e||r[s][i]&&r[s][i]!==t[a])return!1}return!0}(t,m,g,i)){let e=function(e,t,l,n){let o=[];for(let a=0;a<e.length;a++){let s=t+n[0]*a,i=l+n[1]*a;r[s][i]=e[a],o.push([s,i])}return o}(t,m,g,i);n.push({word:o,coords:e,placedWord:t}),a=!0}}}for(let t=0;t<e;t++)for(let l=0;l<e;l++)r[t][l]||(r[t][l]=c[Math.floor(Math.random()*c.length)]);return{grid:r,placements:n}}(10,o),a++;while(r.placements.length<o.length&&a<20);f(r.grid),v(r.placements),p(r.placements.map(e=>e.word)),j([]),W(0),A(!0)}function I(e,t){k(!0),E([[e,t]]),D(null),B||(W(0),A(!0))}function z(e,t){S&&E(r=>{if(0===r.length)return[[e,t]];let l=r[0],n=[e,t];if(1===r.length)return l[0]===e&&l[1]===t?r:(D(function(e,t){let[r,l]=e,[n,o]=t,a=e=>0===e?0:e>0?1:-1;return[a(n-r),a(o-l)]}(l,n)),[l,n]);if(P&&function(e,t,r){let[l,n]=e,[o,a]=t,[s,i]=r;if(0===s&&0===i)return l===o&&n===a;let d=0!==s?(o-l)/s:0!==i?(a-n)/i:0;return!(d<0)&&.001>Math.abs(l+d*s-o)&&.001>Math.abs(n+d*i-a)}(l,n,P)){let[r,n]=l,[o,a]=P,s=Math.max(Math.abs(e-r),Math.abs(t-n)),i=[];for(let e=0;e<=s;e++){let t=r+e*o,l=n+e*a;t>=0&&t<10&&l>=0&&l<10&&i.push([t,l])}return i}return r})}function U(){if(!S||0===C.length){k(!1),E([]),D(null);return}let e=C.map(e=>{let[t,r]=e;return x[t][r]}).join(""),t=[...e].reverse().join("");console.log("User selected:",e,"or reversed:",t),console.log("Selection coordinates:",C);let r=w.find(r=>{let l=r.placedWord||r.word,n=[...l].reverse().join(""),o=(l===e||l===t||n===e||n===t)&&!y.includes(r.word);return o&&console.log("Matched placement:",r.word,"at coords:",r.coords),o});if(r){let e=[...y,r.word];j(e),console.log("Added to found words:",r.word),e.length===b.length&&(A(!1),(null===R||L<R)&&T(L),M(!0))}else console.log("No match found for selection");k(!1),E([]),D(null)}function q(e){let t=e.touches[0],r=document.elementFromPoint(t.clientX,t.clientY);if(r&&r instanceof HTMLElement&&r.dataset.cell){let[e,t]=r.dataset.cell.split(","),l=Number(e),n=Number(t);Number.isNaN(l)||Number.isNaN(n)||z(l,n)}}function G(e){let t=Math.floor(e/60).toString().padStart(2,"0"),r=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(r)}return(0,n.useEffect)(()=>(B&&null===F.current?F.current=window.setInterval(()=>W(e=>e+1),1e3):B||null===F.current||(window.clearInterval(F.current),F.current=null),()=>{F.current&&(window.clearInterval(F.current),F.current=null)}),[B]),(0,n.useEffect)(()=>{let t=!1;return async function(){if(!e){r(null),h(!1),g(null);return}try{h(!0),g(null);let l=await (0,i.zb)(e);t||(l?r(l):g("Failed to load word list: ".concat(e)))}catch(e){t||g("Error loading word list")}finally{t||h(!1)}}(),()=>{t=!0}},[e]),(0,n.useEffect)(()=>{_()},[t]),((0,n.useEffect)(()=>{if(N&&b.length>0&&y.length===b.length){let e={ticks:200,gravity:1,spread:70,scalar:1},t=(t,r)=>{(0,d.A)(Object.assign({},e,r,{particleCount:Math.floor(400*t)}))};t(.25,{spread:26,startVelocity:55}),t(.2,{spread:60}),t(.35,{spread:100,decay:.91,scalar:1.1}),t(.1,{spread:120,startVelocity:25,decay:.92}),t(.1,{spread:120,startVelocity:45})}},[N,y.length,b.length]),e)?o?(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 flex items-center justify-center p-8",children:(0,l.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8 text-center max-w-md",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-purple-200 border-t-purple-600 mx-auto mb-6"}),(0,l.jsxs)("p",{className:"text-gray-700 font-medium text-lg",children:["Loading ",e," word list..."]})]})}):m?(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 flex items-center justify-center p-8",children:(0,l.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8 text-center max-w-md",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"❌"}),(0,l.jsx)("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:"Error"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:m}),(0,l.jsx)(a(),{href:"/",className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 inline-block",children:"Go Back to Home"})]})}):(0,l.jsxs)("div",{className:"p-4 max-w-screen-sm mx-auto bg-gradient-to-b from-blue-50 to-indigo-100 min-h-screen",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-indigo-800",children:"Word Search"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:_,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:"New Game ↻"}),(0,l.jsx)("button",{onClick:()=>A(!B),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:B?"Pause":"Resume"})]})]}),(0,l.jsxs)("div",{className:"flex gap-6 items-center mb-4 bg-white rounded-lg p-3 shadow-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"Time"}),(0,l.jsx)("div",{className:"font-mono text-lg font-bold text-gray-800",children:G(L)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"Best"}),(0,l.jsx)("div",{className:"font-mono text-lg font-bold text-gray-800",children:null===R?"--:--":G(R)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"Progress"}),(0,l.jsxs)("div",{className:"font-bold text-lg text-gray-800",children:[y.length,"/",b.length]})]})]}),0===x.length?(0,l.jsx)("div",{className:"text-center py-8",children:(0,l.jsx)("div",{className:"text-gray-600",children:"Loading puzzle…"})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"grid gap-1 mx-auto mb-6 p-4 bg-white rounded-lg shadow-lg relative",style:{gridTemplateColumns:"repeat(".concat(10,", 2.8rem)")},onMouseUp:U,onTouchEnd:U,children:[x.map((e,t)=>e.map((e,r)=>{let n=C.some(e=>{let[l,n]=e;return l===t&&n===r}),o=function(e,t){for(let r of w)if(y.includes(r.word)){for(let[l,n]of r.coords)if(l===e&&n===t)return r.word}return null}(t,r);return(0,l.jsx)("div",{"data-cell":"".concat(t,",").concat(r),onMouseDown:()=>I(t,r),onMouseEnter:()=>z(t,r),onTouchStart:()=>I(t,r),onTouchMove:q,className:"\n                      h-10 w-10 flex items-center justify-center border rounded-lg\n                      select-none text-sm font-bold cursor-pointer transition-all duration-150\n                      ".concat(o?"bg-blue-50 text-blue-800":n?"bg-yellow-100 border-yellow-400 border-4 text-gray-800 scale-110":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100","\n                    "),style:{userSelect:"none",touchAction:"none",boxShadow:n?"0 0 10px rgba(255, 193, 7, 0.5)":"none"},children:e},"".concat(t,"-").concat(r))})),(0,l.jsx)("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",children:w.filter(e=>y.includes(e.word)).map((e,t)=>{let r=function(e){if(0===e.coords.length)return null;let t=e.coords[0],r=e.coords[e.coords.length-1],l=document.querySelector('[data-cell="'.concat(t[0],",").concat(t[1],'"]')),n=document.querySelector('[data-cell="'.concat(r[0],",").concat(r[1],'"]'));if(!l||!n)return null;let o=l.parentElement;if(!o)return null;let a=o.getBoundingClientRect(),s=l.getBoundingClientRect(),i=n.getBoundingClientRect(),d=s.left-a.left+s.width/2,c=s.top-a.top+s.height/2,u=i.left-a.left+i.width/2,h=i.top-a.top+i.height/2,m=u-d,g=h-c,x=Math.sqrt(m*m+g*g),f=s.width,b=s.height,p=Math.max(8,Math.min(f,b)-6),w=Math.min(10,p/2);return{cx:(d+u)/2,cy:(c+h)/2,width:x+Math.max(f,b),height:p,angle:180*Math.atan2(g,m)/Math.PI,rx:w}}(e);if(!r)return null;let n=["#dc2626","#059669","#7c3aed","#ea580c","#0891b2","#be123c"],o=n[t%n.length];return(0,l.jsx)("rect",{x:r.cx-r.width/2,y:r.cy-r.height/2,width:r.width,height:r.height,rx:r.rx,ry:r.rx,transform:"rotate(".concat(r.angle," ").concat(r.cx," ").concat(r.cy,")"),fill:"none",stroke:o,strokeWidth:"3",strokeLinecap:"round",opacity:"0.8"},"rect-".concat(e.word,"-").concat(t))})})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-3 text-gray-800",children:"Find these words:"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:b.map(e=>{let t=y.includes(e),r=w.findIndex(t=>t.word===e),n=["#dc2626","#059669","#7c3aed","#ea580c","#0891b2","#be123c"],o=n[r%n.length];return(0,l.jsx)("div",{className:"\n                      px-3 py-2 border-2 rounded-lg font-medium transition-all duration-300 relative\n                      ".concat(t?"bg-blue-50 text-blue-800":"bg-gray-50 border-gray-200 text-gray-700","\n                    "),style:{borderColor:t?o:"#e5e7eb"},children:(0,l.jsx)("span",{className:t?"line-through decoration-2":"",style:{textDecorationColor:t?o:"inherit"},children:e})},e)})})]}),y.length===b.length&&b.length>0&&(0,l.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-400 to-green-500 border-0 rounded-lg text-white font-bold text-center shadow-lg",children:[(0,l.jsx)("div",{className:"text-2xl mb-1",children:"\uD83C\uDF89 Congratulations!"}),(0,l.jsxs)("div",{children:["You found all words in ",G(L),"!"]}),R===L&&(0,l.jsx)("div",{className:"text-sm mt-1 opacity-90",children:"New best time! ⭐"})]})]})]}):(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 flex items-center justify-center p-8",children:(0,l.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8 text-center max-w-md",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCDA"}),(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"No Word List Selected"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"Please go back and select a word list first."}),(0,l.jsx)(a(),{href:"/",className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 inline-block",children:"Go Back to Home"})]})})}}},e=>{e.O(0,[874,585,441,964,358],()=>e(e.s=2751)),_N_E=e.O()}]);